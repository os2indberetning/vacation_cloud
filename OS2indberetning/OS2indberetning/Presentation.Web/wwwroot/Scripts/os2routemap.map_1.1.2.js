/* os2routemap - VERSION 1.1.2 - build 18-11-2015 - developed by Septima */
var OS2RouteMap={options:null,map:null,id:null,timeout:null,routeToken:null,routeControl:null,addresses:[],maps:{},fixedRoute:[],profile:"car",activeProfile:null,host:"//os2routemap.cdn.septima.dk/1.1.2/",icons:{starticon:"dist/marker-icon-green.png",via:"//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/images/marker-icon.png",endicon:"dist/marker-icon-red.png"},change:function(a){},error:function(a){},show:function(a){if(this.options=a,this.id=a.id,"undefined"==typeof a.routeToken)return void alert("TOKEN til ruteservice mangler!");if(this.routeToken=a.routeToken,"undefined"!=typeof a.change&&(this.change=a.change),"undefined"!=typeof a.error&&(this.error=a.error),null===this.map&&(this.routeControl=null,this.createMap()),"undefined"!=typeof this.options.Addresses&&(this.addresses=this.options.Addresses,this.addRoutes(this.options.Addresses)),"undefined"!=typeof this.options.icons)for(var b in this.options.icons)this.icons[b]=this.options.icons[b]},clearRoutes:function(){},create:function(a){return this.options=a,this.id=a.id,"undefined"==typeof a.routeToken?void alert("TOKEN til ruteservice mangler!"):(this.routeToken=a.routeToken,"undefined"!=typeof a.change&&(this.change=a.change),"undefined"!=typeof a.error&&(this.error=a.error),this.host==="cdnlocation".toUpperCase()&&(this.host=""),"undefined"==typeof this.icons.start&&"undefined"!=typeof this.icons.starticon&&(this.icons.start=this.host+this.icons.starticon),"undefined"==typeof this.icons.end&&"undefined"!=typeof this.icons.endicon&&(this.icons.end=this.host+this.icons.endicon),this.routeControl=null,void this.createMap())},set:function(a,b){"undefined"!=typeof b&&(this.profile=b),this.addresses=a,this.addRoutes(a)},createMap:function(){null!==this.map&&this.map.remove(),this.map=new L.map(this.id);L.tileLayer("//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map)},addRoutes:function(a){if("undefined"!=typeof a){for(var b=[],c=0;c<a.length;c++){var d=a[c].lat,e=a[c].lng,f=L.latLng(d,e);b.push(f)}null!==this.routeControl&&"undefined"!=typeof this.routeControl._routes&&delete this.routeControl._routes,null===this.routeControl||this.activeProfile!==this.profile?(this.activeProfile=this.profile,null!==this.routeControl&&this.routeControl.removeFrom(this.map),this.routeControl=L.Routing.control({serviceUrl:"//new-routing.septima.dk/"+this.routeToken+"/"+this.profile+"/viaroute",profile:this.profile,plan:L.Routing.plan(b,{createMarker:this.bind(function(a,b,c){var d={};0===a?d.iconUrl=this.icons.start:a===c-1?d.iconUrl=this.icons.end:d.iconUrl=this.icons.via;var e=L.marker(b.latLng,{draggable:!0,icon:new L.Icon.Default(d)});return e.on("click",this.bind(function(a){this.routeControl.spliceWaypoints(a,1)},this,a)),e},this),geocoder:L.Control.Geocoder.aws(),routeWhileDragging:!0,maxGeocoderTolerance:1e6}),geocoder:L.Control.Geocoder.aws(),fitSelectedRoutes:!0,language:"dk"}).addTo(this.map),this.routeControl.hide(),this.routeControl.on("routesfound",this.bind(this.onchange,this)),this.routeControl.on("routingerror",this.bind(function(a){this.change(a.error)},this))):(this.routeControl.options.fitSelectedRoutes=!0,this.routeControl.fitSelectedRoutes=!0),this.routeControl.setWaypoints(b),setTimeout(this.bind(function(){this.disableFitOptions()},this),1e3)}},onchange:function(a){null!==this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.bind(function(){this.onchangedelay()},this),300)},onchangedelay:function(){var a=this.get();if(null===a)this.timeout=setTimeout(this.bind(function(){this.onchangedelay()},this),100);else{for(var b=!0,c=0;c<a.Addresses.length;c++)""===a.Addresses[c].name&&(b=!1);b===!1?this.timeout=setTimeout(this.bind(function(){this.onchangedelay()},this),100):(a.status=0,a.message="OK",this.change(a))}},disableFitOptions:function(){this.routeControl.fitSelectedRoutes=!1,this.routeControl.options.fitSelectedRoutes=!1},get:function(){if("undefined"==typeof this.routeControl._routes)return null;this.disableFitOptions();for(var a,b,c=0;c<this.routeControl._routes.length;c++){var d=this.routeControl._routes[c].summary.totalDistance,e=this.routeControl._routes[c].summary.totalTime;0==c&&(a=d,b=e),c>0&&b>e&&(a=d,b=e)}for(var f=this.routeControl.getWaypoints(),g={Addresses:[]},c=0;c<f.length;c++){var h={name:f[c].name,distance:f[c].distance,data:f[c].properties,lat:f[c].latLng.lat,lng:f[c].latLng.lng};g.Addresses.push(h)}return g.distance=a/1e3,g.duration=b/60,g},viewRoute:function(a,b){this.removeFixedRoute();for(var c=[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],d=0;d<c.length;d++){var e=new L.Polyline(L.PolylineUtil.decode(a,6),c[d]);this.fixedRoute.push(e),e.addTo(this.map)}if(this.fixedRoute.length>0){var f=this.fixedRoute[0].getLatLngs(),g=L.Icon.Default.extend({}),h=L.marker(f[0],{icon:new g({iconUrl:this.icons.start})}).addTo(this.map);this.fixedRoute.push(h);var i=L.marker(f[f.length-1],{icon:new g({iconUrl:this.icons.end})}).addTo(this.map);this.fixedRoute.push(i),"undefined"!=typeof b&&b===!0&&this.map.fitBounds(this.fixedRoute[0].getBounds())}},removeFixedRoute:function(){if(0!==this.fixedRoute.length){for(var a=0;a<this.fixedRoute.length;a++)this.map.removeLayer(this.fixedRoute[a]);this.fixedRoute.length=0}},bind:function(a,b){var c=Array.prototype.slice.apply(arguments,[2]);return function(){var d=c.concat(Array.prototype.slice.apply(arguments,[0]));return a.apply(b,d)}}};!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(b.L||(b.L={})).Routing=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c){function d(a){return a>=200&&300>a||304===a}function e(){void 0===h.status||d(h.status)?b.call(h,null,h):b.call(h,h,null)}var f=!1;if("undefined"==typeof window.XMLHttpRequest)return b(Error("Browser not supported"));if("undefined"==typeof c){var g=a.match(/^\s*https?:\/\/[^\/]*/);c=g&&g[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var h=new window.XMLHttpRequest;if(c&&!("withCredentials"in h)){h=new window.XDomainRequest;var i=b;b=function(){if(f)i.apply(this,arguments);else{var a=this,b=arguments;setTimeout(function(){i.apply(a,b)},0)}}}return"onload"in h?h.onload=e:h.onreadystatechange=function(){4===h.readyState&&e()},h.onerror=function(a){b.call(this,a||!0,null),b=function(){}},h.onprogress=function(){},h.ontimeout=function(a){b.call(this,a,null),b=function(){}},h.onabort=function(a){b.call(this,a,null),b=function(){}},h.open("GET",a,!0),h.send(null),f=!0,h}"undefined"!=typeof b&&(b.exports=d)},{}],2:[function(a,b,c){function d(a,b){a=Math.round(a*b),a<<=1,0>a&&(a=~a);for(var c="";a>=32;)c+=String.fromCharCode((32|31&a)+63),a>>=5;return c+=String.fromCharCode(a+63)}var e={};e.decode=function(a,b){for(var c,d,e=0,f=0,g=0,h=[],i=0,j=0,k=null,l=Math.pow(10,b||5);e<a.length;){k=null,i=0,j=0;do k=a.charCodeAt(e++)-63,j|=(31&k)<<i,i+=5;while(k>=32);c=1&j?~(j>>1):j>>1,i=j=0;do k=a.charCodeAt(e++)-63,j|=(31&k)<<i,i+=5;while(k>=32);d=1&j?~(j>>1):j>>1,f+=c,g+=d,h.push([f/l,g/l])}return h},e.encode=function(a,b){if(!a.length)return"";for(var c=Math.pow(10,b||5),e=d(a[0][0],c)+d(a[0][1],c),f=1;f<a.length;f++){var g=a[f],h=a[f-1];e+=d(g[0]-h[0],c),e+=d(g[1]-h[1],c)}return e},void 0!==typeof b&&(b.exports=e)},{}],3:[function(a,b,c){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.Autocomplete=L.Class.extend({options:{timeout:500,blurTimeout:100,noResultsMessage:"No results found."},initialize:function(a,b,c,d){L.setOptions(this,d),this._elem=a,this._resultFn=d.resultFn?L.Util.bind(d.resultFn,d.resultContext):null,this._autocomplete=d.autocompleteFn?L.Util.bind(d.autocompleteFn,d.autocompleteContext):null,this._selectFn=L.Util.bind(b,c),this._container=L.DomUtil.create("div","leaflet-routing-geocoder-result"),this._resultTable=L.DomUtil.create("table","",this._container),L.DomEvent.addListener(this._elem,"input",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keypress",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keydown",this._keyDown,this),L.DomEvent.addListener(this._elem,"blur",function(){this._isOpen&&this.close()},this)},close:function(){L.DomUtil.removeClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!1},_open:function(){var a=this._elem.getBoundingClientRect();this._container.parentElement||(this._container.style.left=a.left+window.scrollX+"px",this._container.style.top=a.bottom+window.scrollY+"px",this._container.style.width=a.right-a.left+"px",document.body.appendChild(this._container)),L.DomUtil.addClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!0},_setResults:function(a){var b,c,d,e;for(delete this._selection,this._results=a;this._resultTable.firstChild;)this._resultTable.removeChild(this._resultTable.firstChild);for(b=0;b<a.length;b++)c=L.DomUtil.create("tr","",this._resultTable),c.setAttribute("data-result-index",b),d=L.DomUtil.create("td","",c),e=document.createTextNode(a[b].name),d.appendChild(e),L.DomEvent.addListener(d,"mousedown",L.DomEvent.preventDefault),L.DomEvent.addListener(d,"click",this._createClickListener(a[b]));b||(c=L.DomUtil.create("tr","",this._resultTable),d=L.DomUtil.create("td","leaflet-routing-geocoder-no-results",c),d.innerHTML=this.options.noResultsMessage),this._open(),a.length>0&&this._select(1)},_createClickListener:function(a){var b=this._resultSelected(a);return L.bind(function(){this._elem.blur(),b()},this)},_resultSelected:function(a){return L.bind(function(){this.close(),this._elem.value=a.name,this._lastCompletedText=a.name,this._selectFn(a)},this)},_keyPressed:function(a){var b;return this._isOpen&&13===a.keyCode&&this._selection?(b=parseInt(this._selection.getAttribute("data-result-index"),10),this._resultSelected(this._results[b])(),void L.DomEvent.preventDefault(a)):13===a.keyCode?void this._complete(this._resultFn,!0):this._autocomplete&&document.activeElement===this._elem?(this._timer&&clearTimeout(this._timer),void(this._timer=setTimeout(L.Util.bind(function(){this._complete(this._autocomplete)},this),this.options.timeout))):void this._unselect()},_select:function(a){var b=this._selection;b&&(L.DomUtil.removeClass(b.firstChild,"leaflet-routing-geocoder-selected"),b=b[a>0?"nextSibling":"previousSibling"]),b||(b=this._resultTable[a>0?"firstChild":"lastChild"]),b&&(L.DomUtil.addClass(b.firstChild,"leaflet-routing-geocoder-selected"),this._selection=b)},_unselect:function(){this._selection&&L.DomUtil.removeClass(this._selection.firstChild,"leaflet-routing-geocoder-selected"),delete this._selection},_keyDown:function(a){if(this._isOpen)switch(a.keyCode){case 27:return this.close(),void L.DomEvent.preventDefault(a);case 38:return this._select(-1),void L.DomEvent.preventDefault(a);case 40:return this._select(1),void L.DomEvent.preventDefault(a)}},_complete:function(a,b){function c(a){this._lastCompletedText=d,b&&1===a.length?this._resultSelected(a[0])():this._setResults(a)}var d=this._elem.value;d&&(d!==this._lastCompletedText?a(d,c,this):b&&c.call(this,this._results))}})}()},{}],4:[function(a,b,c){(function(c){!function(){"use strict";var d="undefined"!=typeof window?window.L:"undefined"!=typeof c?c.L:null;d.Routing=d.Routing||{},d.extend(d.Routing,a("./L.Routing.Itinerary")),d.extend(d.Routing,a("./L.Routing.Line")),d.extend(d.Routing,a("./L.Routing.Plan")),d.extend(d.Routing,a("./L.Routing.OSRM")),d.Routing.Control=d.Routing.Itinerary.extend({options:{fitSelectedRoutes:"smart",routeLine:function(a,b){return d.Routing.line(a,b)},autoRoute:!0,routeWhileDragging:!1,routeDragInterval:500,waypointMode:"connect",useZoomParameter:!1},initialize:function(a){d.Util.setOptions(this,a),this._router=this.options.router||new d.Routing.OSRM(a),this._plan=this.options.plan||d.Routing.plan(this.options.waypoints,a),this._requestCount=0,d.Routing.Itinerary.prototype.initialize.call(this,a),this.on("routeselected",this._routeSelected,this),this._plan.on("waypointschanged",this._onWaypointsChanged,this),a.routeWhileDragging&&this._setupRouteDragging(),this.options.autoRoute&&this.route()},onAdd:function(a){var b=d.Routing.Itinerary.prototype.onAdd.call(this,a);return this._map=a,this._map.addLayer(this._plan),this.options.useZoomParameter&&this._map.on("zoomend",function(){this.route({callback:d.bind(this._updateLineCallback,this)})},this),this._plan.options.geocoder&&b.insertBefore(this._plan.createGeocoders(),b.firstChild),b},onRemove:function(a){return this._line&&a.removeLayer(this._line),a.removeLayer(this._plan),d.Routing.Itinerary.prototype.onRemove.call(this,a)},getWaypoints:function(){return this._plan.getWaypoints()},setWaypoints:function(a){return this._plan.setWaypoints(a),this},spliceWaypoints:function(){var a=this._plan.spliceWaypoints.apply(this._plan,arguments);return a},getPlan:function(){return this._plan},getRouter:function(){return this._router},_routeSelected:function(a){var b=a.route,c=this.options.fitSelectedRoutes,d="smart"===c&&!this._waypointsVisible()||"smart"!==c&&c;this._updateLine(b),d&&this._map.fitBounds(this._line.getBounds()),"snap"===this.options.waypointMode&&(this._plan.off("waypointschanged",this._onWaypointsChanged,this),this.setWaypoints(b.waypoints),this._plan.on("waypointschanged",this._onWaypointsChanged,this))},_waypointsVisible:function(){var a,b,c,e,f,g=this.getWaypoints();try{for(a=this._map.getSize(),e=0;e<g.length;e++)f=this._map.latLngToLayerPoint(g[e].latLng),b?b.extend(f):b=d.bounds([f]);return c=b.getSize(),(c.x>a.x/5||c.y>a.y/5)&&this._waypointsInViewport()}catch(h){return!1}},_waypointsInViewport:function(){var a,b,c=this.getWaypoints();try{a=this._map.getBounds()}catch(d){return!1}for(b=0;b<c.length;b++)if(a.contains(c[b].latLng))return!0;return!1},_updateLine:function(a){var b=void 0!==this.options.addWaypoints?this.options.addWaypoints:!0;this._clearLine(),this._line=this.options.routeLine(a,d.extend({addWaypoints:b,extendToWaypoints:"connect"===this.options.waypointMode},this.options.lineOptions)),this._line.addTo(this._map),this._hookEvents(this._line)},_hookEvents:function(a){a.on("linetouched",function(a){this._plan.dragNewWaypoint(a)},this)},_onWaypointsChanged:function(a){this.options.autoRoute&&this.route({}),this._plan.isReady()||(this._clearLine(),this._clearAlts()),this.fire("waypointschanged",{waypoints:a.waypoints})},_setupRouteDragging:function(){var a,b=0;this._plan.on("waypointdrag",d.bind(function(c){a=c.waypoints,b||(b=setTimeout(d.bind(function(){this.route({waypoints:a,geometryOnly:!0,callback:d.bind(this._updateLineCallback,this)}),b=void 0},this),this.options.routeDragInterval))},this)),this._plan.on("waypointdragend",function(){b&&(clearTimeout(b),b=void 0),this.route()},this)},_updateLineCallback:function(a,b){a||this._updateLine(b[0])},route:function(a){var b,c=++this._requestCount;a=a||{},this._plan.isReady()&&(this.options.useZoomParameter&&(a.z=this._map&&this._map.getZoom()),b=a&&a.waypoints||this._plan.getWaypoints(),this.fire("routingstart",{waypoints:b}),this._router.route(b,a.callback||function(d,e){if(c===this._requestCount){if(this._clearLine(),this._clearAlts(),d)return void this.fire("routingerror",{error:d});a.geometryOnly?this._routeSelected({route:e[0]}):(this.fire("routesfound",{waypoints:b,routes:e}),this.setAlternatives(e))}},this,a))},_clearLine:function(){this._line&&(this._map.removeLayer(this._line),delete this._line)}}),d.Routing.control=function(a){return new d.Routing.Control(a)},b.exports=d.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Itinerary":6,"./L.Routing.Line":8,"./L.Routing.OSRM":10,"./L.Routing.Plan":11}],5:[function(a,b,c){(function(c){!function(){"use strict";var d="undefined"!=typeof window?window.L:"undefined"!=typeof c?c.L:null;d.Routing=d.Routing||{},d.extend(d.Routing,a("./L.Routing.Localization")),d.Routing.Formatter=d.Class.extend({options:{units:"metric",unitNames:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"mín",seconds:"s"},language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(a){d.setOptions(this,a)},formatDistance:function(a){var b,c,e=this.options.unitNames;return"imperial"===this.options.units?(a/=1.609344,c=a>=1e3?{value:this._round(a)/1e3,unit:e.miles}:{value:this._round(a/1.76),unit:e.yards}):(b=this._round(a),c={value:b>=1e3?b/1e3:b,unit:b>=1e3?e.kilometers:e.meters}),d.Util.template(this.options.distanceTemplate,c)},_round:function(a){var b=Math.pow(10,(Math.floor(a/this.options.roundingSensitivity)+"").length-1),c=Math.floor(a/b),d=c>5?b:b/2;return Math.round(a/d)*d},formatTime:function(a){return a>86400?Math.round(a/3600)+" h":a>3600?Math.floor(a/3600)+" h "+Math.round(a%3600/60)+" min":a>300?Math.round(a/60)+" min":a>60?Math.floor(a/60)+" min"+(a%60!==0?" "+a%60+" s":""):a+" s"},formatInstruction:function(a,b){return void 0===a.text?d.Util.template(this._getInstructionTemplate(a,b),d.extend({exitStr:a.exit?d.Routing.Localization[this.options.language].formatOrder(a.exit):"",dir:d.Routing.Localization[this.options.language].directions[a.direction]},a)):a.text},getIconName:function(a,b){switch(a.type){case"Straight":return 0===b?"depart":"continue";case"SlightRight":return"bear-right";case"Right":return"turn-right";case"SharpRight":return"sharp-right";case"TurnAround":return"u-turn";case"SharpLeft":return"sharp-left";case"Left":return"turn-left";case"SlightLeft":return"bear-left";case"WaypointReached":return"via";case"Roundabout":return"enter-roundabout";case"DestinationReached":return"arrive"}},_getInstructionTemplate:function(a,b){var c="Straight"===a.type?0===b?"Head":"Continue":a.type,e=d.Routing.Localization[this.options.language].instructions[c];return e[0]+(e.length>1&&a.road?e[1]:"")}}),b.exports=d.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Localization":9}],6:[function(a,b,c){(function(c){!function(){"use strict";var d="undefined"!=typeof window?window.L:"undefined"!=typeof c?c.L:null;d.Routing=d.Routing||{},d.extend(d.Routing,a("./L.Routing.Formatter")),d.extend(d.Routing,a("./L.Routing.ItineraryBuilder")),d.Routing.Itinerary=d.Control.extend({includes:d.Mixin.Events,options:{pointMarkerStyle:{radius:5,color:"#03f",fillColor:"white",opacity:1,fillOpacity:.7},summaryTemplate:"<h2>{name}</h2><h3>{distance}, {time}</h3>",timeTemplate:"{time}",containerClassName:"",alternativeClassName:"",minimizedClassName:"",itineraryClassName:"",show:!0},initialize:function(a){d.setOptions(this,a),this._formatter=this.options.formatter||new d.Routing.Formatter(this.options),this._itineraryBuilder=this.options.itineraryBuilder||new d.Routing.ItineraryBuilder({containerClassName:this.options.itineraryClassName})},onAdd:function(){return this._container=d.DomUtil.create("div","leaflet-routing-container leaflet-bar "+(this.options.show?"":"leaflet-routing-container-hide")+this.options.containerClassName),this._altContainer=this.createAlternativesContainer(),this._container.appendChild(this._altContainer),d.DomEvent.disableClickPropagation(this._container),d.DomEvent.addListener(this._container,"mousewheel",function(a){d.DomEvent.stopPropagation(a)}),this._container},onRemove:function(){},createAlternativesContainer:function(){return d.DomUtil.create("div","leaflet-routing-alternatives-container")},setAlternatives:function(a){var b,c,d;for(this._clearAlts(),this._routes=a,b=0;b<this._routes.length;b++)c=this._routes[b],d=this._createAlternative(c,b),this._altContainer.appendChild(d),this._altElements.push(d);return this.fire("routeselected",{route:this._routes[0]}),this},show:function(){d.DomUtil.removeClass(this._container,"leaflet-routing-container-hide")},hide:function(){d.DomUtil.addClass(this._container,"leaflet-routing-container-hide")},_createAlternative:function(a,b){var c=d.DomUtil.create("div","leaflet-routing-alt "+this.options.alternativeClassName+(b>0?" leaflet-routing-alt-minimized "+this.options.minimizedClassName:"")),e=this.options.summaryTemplate,f=d.extend({name:a.name,distance:this._formatter.formatDistance(a.summary.totalDistance),time:this._formatter.formatTime(a.summary.totalTime)},a);return c.innerHTML="function"==typeof e?e(f):d.Util.template(e,f),d.DomEvent.addListener(c,"click",this._onAltClicked,this),c.appendChild(this._createItineraryContainer(a)),c},_clearAlts:function(){for(var a=this._altContainer;a&&a.firstChild;)a.removeChild(a.firstChild);this._altElements=[]},_createItineraryContainer:function(a){var b,c,d,e,f,g,h=this._itineraryBuilder.createContainer(),i=this._itineraryBuilder.createStepsContainer();for(h.appendChild(i),b=0;b<a.instructions.length;b++)c=a.instructions[b],f=this._formatter.formatInstruction(c,b),e=this._formatter.formatDistance(c.distance),g=this._formatter.getIconName(c,b),d=this._itineraryBuilder.createStep(f,e,g,i),this._addRowListeners(d,a.coordinates[c.index]);return h},_addRowListeners:function(a,b){var c,e=this;d.DomEvent.addListener(a,"mouseover",function(){c=d.circleMarker(b,e.options.pointMarkerStyle).addTo(e._map)}),d.DomEvent.addListener(a,"mouseout",function(){c&&(e._map.removeLayer(c),c=null)}),d.DomEvent.addListener(a,"click",function(a){e._map.panTo(b),d.DomEvent.stopPropagation(a)})},_onAltClicked:function(a){var b,c,e,f,g;for(b=a.target||window.event.srcElement;!d.DomUtil.hasClass(b,"leaflet-routing-alt");)b=b.parentElement;if(d.DomUtil.hasClass(b,"leaflet-routing-alt-minimized"))for(c=0;c<this._altElements.length;c++)e=this._altElements[c],f=b===e,g=f?"removeClass":"addClass",d.DomUtil[g](e,"leaflet-routing-alt-minimized"),this.options.minimizedClassName&&d.DomUtil[g](e,this.options.minimizedClassName),f?this.fire("routeselected",{route:this._routes[c]}):e.scrollTop=0;d.DomEvent.stop(a)}}),d.Routing.itinerary=function(a){return new d.Routing.Itinerary(a)},b.exports=d.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Formatter":5,"./L.Routing.ItineraryBuilder":7}],7:[function(a,b,c){(function(a){!function(){"use strict";var c="undefined"!=typeof window?window.L:"undefined"!=typeof a?a.L:null;c.Routing=c.Routing||{},c.Routing.ItineraryBuilder=c.Class.extend({options:{containerClassName:""},initialize:function(a){c.setOptions(this,a)},createContainer:function(a){var b=c.DomUtil.create("table",a||""),d=c.DomUtil.create("colgroup","",b);return c.DomUtil.create("col","leaflet-routing-instruction-icon",d),c.DomUtil.create("col","leaflet-routing-instruction-text",d),c.DomUtil.create("col","leaflet-routing-instruction-distance",d),b},createStepsContainer:function(){return c.DomUtil.create("tbody","")},createStep:function(a,b,d,e){var f,g,h=c.DomUtil.create("tr","",e);return g=c.DomUtil.create("td","",h),f=c.DomUtil.create("span","leaflet-routing-icon leaflet-routing-icon-"+d,g),g.appendChild(f),g=c.DomUtil.create("td","",h),g.appendChild(document.createTextNode(a)),g=c.DomUtil.create("td","",h),g.appendChild(document.createTextNode(b)),h}}),b.exports=c.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b,c){(function(a){!function(){"use strict";var c="undefined"!=typeof window?window.L:"undefined"!=typeof a?a.L:null;c.Routing=c.Routing||{},c.Routing.Line=c.LayerGroup.extend({includes:c.Mixin.Events,options:{styles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],missingRouteStyles:[{color:"black",opacity:.15,weight:7},{color:"white",opacity:.6,weight:4},{color:"gray",opacity:.8,weight:2,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(a,b){c.setOptions(this,b),c.LayerGroup.prototype.initialize.call(this,b),this._route=a,this.options.extendToWaypoints&&this._extendToWaypoints(),this._addSegment(a.coordinates,this.options.styles,this.options.addWaypoints)},addTo:function(a){return a.addLayer(this),this},getBounds:function(){return c.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var a,b=this._route.inputWaypoints,c=[];for(a=0;a<b.length;a++)c.push(this._findClosestRoutePoint(b[a].latLng));return c},_findClosestRoutePoint:function(a){var b,c,d,e=Number.MAX_VALUE;for(c=this._route.coordinates.length-1;c>=0;c--)d=a.distanceTo(this._route.coordinates[c]),e>d&&(b=c,e=d);return b},_extendToWaypoints:function(){var a,b,d,e=this._route.inputWaypoints,f=this._getWaypointIndices();for(a=0;a<e.length;a++)b=e[a].latLng,d=c.latLng(this._route.coordinates[f[a]]),b.distanceTo(d)>this.options.missingRouteTolerance&&this._addSegment([b,d],this.options.missingRouteStyles)},_addSegment:function(a,b,d){var e,f;for(e=0;e<b.length;e++)f=c.polyline(a,b[e]),this.addLayer(f),d&&f.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(a){for(var b=this._getWaypointIndices(),c=b.length-1;c>=0&&b[c]>a;)c--;return c},_onLineTouched:function(a){var b=this._findNearestWpBefore(this._findClosestRoutePoint(a.latlng));this.fire("linetouched",{afterIndex:b,latlng:a.latlng})},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}}),c.Routing.line=function(a,b){return new c.Routing.Line(a,b)},b.exports=c.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(a,b,c){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.Localization={en:{directions:{N:"north",NE:"northeast",E:"east",SE:"southeast",S:"south",SW:"southwest",W:"west",NW:"northwest"},instructions:{Head:["Head {dir}"," on {road}"],Continue:["Continue {dir}"," on {road}"],SlightRight:["Slight right"," onto {road}"],Right:["Right"," onto {road}"],SharpRight:["Sharp right"," onto {road}"],TurnAround:["Turn around"],SharpLeft:["Sharp left"," onto {road}"],Left:["Left"," onto {road}"],SlightLeft:["Slight left"," onto {road}"],WaypointReached:["Waypoint reached"],Roundabout:["Take the {exitStr} exit in the roundabout"," onto {road}"],DestinationReached:["Destination reached"]},formatOrder:function(a){var b=a%10-1,c=["st","nd","rd"];return c[b]?a+c[b]:a+"th"}},de:{directions:{N:"Norden",NE:"Nordosten",E:"Osten",SE:"Südosten",S:"Süden",SW:"Südwesten",W:"Westen",NW:"Nordwesten"},instructions:{Head:["Richtung {dir}"," auf {road}"],Continue:["Geradeaus Richtung {dir}"," auf {road}"],SlightRight:["Leicht rechts abbiegen"," auf {road}"],Right:["Rechts abbiegen"," auf {road}"],SharpRight:["Scharf rechts abbiegen"," auf {road}"],TurnAround:["Wenden"],SharpLeft:["Scharf links abbiegen"," auf {road}"],Left:["Links abbiegen"," auf {road}"],SlightLeft:["Leicht links abbiegen"," auf {road}"],WaypointReached:["Zwischenhalt erreicht"],Roundabout:["Nehmen Sie die {exitStr} Ausfahrt im Kreisverkehr"," auf {road}"],DestinationReached:["Sie haben ihr Ziel erreicht"]},formatOrder:function(a){return a+"."}},sv:{directions:{N:"norr",NE:"nordost",E:"öst",SE:"sydost",S:"syd",SW:"sydväst",W:"väst",NW:"nordväst"},instructions:{Head:["Åk åt {dir}"," på {road}"],Continue:["Fortsätt {dir}"," på {road}"],SlightRight:["Svagt höger"," på {road}"],Right:["Sväng höger"," på {road}"],SharpRight:["Skarpt höger"," på {road}"],TurnAround:["Vänd"],SharpLeft:["Skarpt vänster"," på {road}"],Left:["Sväng vänster"," på {road}"],SlightLeft:["Svagt vänster"," på {road}"],WaypointReached:["Viapunkt nådd"],Roundabout:["Tag {exitStr} avfarten i rondellen"," till {road}"],DestinationReached:["Framme vid resans mål"]},formatOrder:function(a){return["första","andra","tredje","fjärde","femte","sjätte","sjunde","åttonde","nionde","tionde"][a-1]}},dk:{directions:{N:"nord",NE:"nordøst",E:"øst",SE:"sydøst",S:"syd",SW:"sydvest",W:"vest",NW:"nordvest"},instructions:{Head:["Kør mod {dir}"," ad {road}"],Continue:["Fortsæt {dir}"," ad {road}"],SlightRight:["Drej svagt til højre "," ad {road}"],Right:["Drej til højre"," ad {road}"],SharpRight:["Drej skarpt til højre"," ad {road}"],TurnAround:["Vend"],SharpLeft:["Drej skarpt til venstre"," ad {road}"],Left:["Drej til venstre"," ad {road}"],SlightLeft:["Drej svagt til venstre"," ad {road}"],WaypointReached:["Viapunkt nået"],Roundabout:["Tag {exitStr} frakørsel i rundkørslen"," ad {road}"],DestinationReached:["Fremme ved rejsemål"]},formatOrder:function(a){return["første","anden","tredje","fjerde","femte","sjette","syvende","ottende","niende","tiende"][a-1]}},sp:{directions:{N:"norte",NE:"noreste",E:"este",SE:"sureste",S:"sur",SW:"suroeste",W:"oeste",NW:"noroeste"},instructions:{Head:["Derecho {dir}"," sobre {road}"],Continue:["Continuar {dir}"," en {road}"],SlightRight:["Leve giro a la derecha"," sobre {road}"],Right:["Derecha"," sobre {road}"],SharpRight:["Giro pronunciado a la derecha"," sobre {road}"],TurnAround:["Dar vuelta"],SharpLeft:["Giro pronunciado a la izquierda"," sobre {road}"],Left:["Izquierda"," en {road}"],SlightLeft:["Leve giro a la izquierda"," en {road}"],WaypointReached:["Llegó a un punto del camino"],Roundabout:["Tomar {exitStr} salida en la rotonda"," en {road}"],DestinationReached:["Llegada a destino"]},formatOrder:function(a){return a+"º"}},nl:{directions:{N:"noordelijke",NE:"noordoostelijke",E:"oostelijke",SE:"zuidoostelijke",S:"zuidelijke",SW:"zuidewestelijke",W:"westelijke",NW:"noordwestelijke"},instructions:{Head:["Vertrek in {dir} richting"," de {road} op"],Continue:["Ga in {dir} richting"," de {road} op"],SlightRight:["Volg de weg naar rechts"," de {road} op"],Right:["Ga rechtsaf"," de {road} op"],SharpRight:["Ga scherpe bocht naar rechts"," de {road} op"],TurnAround:["Keer om"],SharpLeft:["Ga scherpe bocht naar links"," de {road} op"],Left:["Ga linksaf"," de {road} op"],SlightLeft:["Volg de weg naar links"," de {road} op"],WaypointReached:["Aangekomen bij tussenpunt"],Roundabout:["Neem de {exitStr} afslag op de rotonde"," de {road} op"],DestinationReached:["Aangekomen op eindpunt"]},formatOrder:function(a){return 1==a||a>=20?a+"ste":a+"de"}},fr:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ouest",W:"ouest",NW:"nord-ouest"},instructions:{Head:["Tout droit au {dir}"," sur {road}"],Continue:["Continuer au {dir}"," sur {road}"],SlightRight:["Légèrement à droite"," sur {road}"],Right:["A droite"," sur {road}"],SharpRight:["Complètement à droite"," sur {road}"],TurnAround:["Faire demi-tour"],SharpLeft:["Complètement à gauche"," sur {road}"],Left:["A gauche"," sur {road}"],SlightLeft:["Légèrement à gauche"," sur {road}"],WaypointReached:["Point d'étape atteint"],Roundabout:["Au rond-point, prenez la {exitStr} sortie"," sur {road}"],DestinationReached:["Destination atteinte"]},formatOrder:function(a){return a+"º"}}},b.exports=L.Routing}()},{}],10:[function(a,b,c){(function(c){!function(){"use strict";var d="undefined"!=typeof window?window.L:"undefined"!=typeof c?c.L:null,e=a("corslite"),f=a("polyline");d.Routing=d.Routing||{},d.extend(d.Routing,a("./L.Routing.Waypoint")),d.Routing.OSRM=d.Class.extend({options:{serviceUrl:"//router.project-osrm.org/viaroute",timeout:3e4},initialize:function(a){d.Util.setOptions(this,a),this._hints={locations:{}}},route:function(a,b,c,f){var g,h,i,j,k=!1,l=[];for(f=f||{},g=this.buildRouteUrl(a,f),h=setTimeout(function(){k=!0,b.call(c||b,{status:-1,message:"OSRM request timed out."
})},this.options.timeout),j=0;j<a.length;j++)i=a[j],l.push(new d.Routing.Waypoint(i.latLng,i.name,i.options));return e(g,d.bind(function(a,d){var e;clearTimeout(h),k||(a?b.call(c||b,{status:-1,message:"HTTP request failed: "+a}):(e=JSON.parse(d.responseText),this._routeDone(e,l,b,c)))},this)),this},_routeDone:function(a,b,c,d){var e,g,h,i;if(d=d||c,0!==a.status)return void c.call(d,{status:a.status,message:a.status_message});if(a.route_summary){var j=0;for(i=0;i<a.route_instructions.length;i++)"bicycle"===d.options.profile?(3===a.route_instructions[i][8]||4===a.route_instructions[i][8])&&(j+=a.route_instructions[i][2]):2===a.route_instructions[i][8]&&(j+=a.route_instructions[i][2]);a.route_summary.total_distance=a.route_summary.total_distance-j}if(e=f.decode(a.route_geometry,6),h=this._toWaypoints(b,a.via_points),g=[{name:a.route_name.join(", "),coordinates:e,instructions:a.route_instructions?this._convertInstructions(a.route_instructions):[],summary:a.route_summary?this._convertSummary(a.route_summary):[],inputWaypoints:b,waypoints:h,waypointIndices:this._clampIndices(a.via_indices,e)}],a.alternative_geometries)for(i=0;i<a.alternative_geometries.length;i++)e=f.decode(a.alternative_geometries[i],6),g.push({name:a.alternative_names[i].join(", "),coordinates:e,instructions:a.alternative_instructions[i]?this._convertInstructions(a.alternative_instructions[i]):[],summary:a.alternative_summaries[i]?this._convertSummary(a.alternative_summaries[i]):[],inputWaypoints:b,waypoints:h,waypointIndices:this._clampIndices(1===a.alternative_geometries.length?a.alternative_indices:a.alternative_indices[i],e)});a.hint_data&&this._saveHintData(a.hint_data,b),c.call(d,null,g)},_toWaypoints:function(a,b){var c,e=[];for(c=0;c<b.length;c++)e.push(d.Routing.waypoint(d.latLng(b[c]),a[c].name,a[c].options));return e},buildRouteUrl:function(a,b){for(var c,d,e,f,g,h=[],i=0;i<a.length;i++)c=a[i],f=this._locationKey(c.latLng),h.push("loc="+f),g=this._hints.locations[f],g&&h.push("hint="+g),c.options&&c.options.allowUTurn&&h.push("u=true");return e=d=!(b&&b.geometryOnly),this.options.serviceUrl+"?instructions="+d+"&alt="+e+"&"+(b.z?"z="+b.z+"&":"")+h.join("&")+(void 0!==this._hints.checksum?"&checksum="+this._hints.checksum:"")+(b.fileformat?"&output="+b.fileformat:"")+(b.allowUTurns?"&uturns="+b.allowUTurns:"")},_locationKey:function(a){return a.lat+","+a.lng},_saveHintData:function(a,b){var c;this._hints={checksum:a.checksum,locations:{}};for(var d=a.locations.length-1;d>=0;d--)c=b[d].latLng,this._hints.locations[this._locationKey(c)]=a.locations[d]},_decode:function(a,b){var c=a.length,d=0,e=0,f=0,g=[];for(b=Math.pow(10,-b);c>d;){var h,i=0,j=0;do h=a.charCodeAt(d++)-63,j|=(31&h)<<i,i+=5;while(h>=32);var k=1&j?~(j>>1):j>>1;e+=k,i=0,j=0;do h=a.charCodeAt(d++)-63,j|=(31&h)<<i,i+=5;while(h>=32);var l=1&j?~(j>>1):j>>1;f+=l,g.push([e*b,f*b])}return g},_convertSummary:function(a){return{totalDistance:a.total_distance,totalTime:a.total_time}},_convertInstructions:function(a){var b,c,d,e,f=[];for(b=0;b<a.length;b++)c=a[b],d=this._drivingDirectionType(c[0]),e=c[0].split("-"),d&&f.push({type:d,distance:c[2],time:c[4],road:c[1],direction:c[6],exit:e.length>1?e[1]:void 0,index:c[3]});return f},_drivingDirectionType:function(a){switch(parseInt(a,10)){case 1:return"Straight";case 2:return"SlightRight";case 3:return"Right";case 4:return"SharpRight";case 5:return"TurnAround";case 6:return"SharpLeft";case 7:return"Left";case 8:return"SlightLeft";case 9:return"WaypointReached";case 10:return"Straight";case 11:case 12:return"Roundabout";case 15:return"DestinationReached";default:return null}},_clampIndices:function(a,b){var c,d=b.length-1;for(c=0;c<a.length;c++)a[c]=Math.min(d,Math.max(a[c],0))}}),d.Routing.osrm=function(a){return new d.Routing.OSRM(a)},b.exports=d.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Waypoint":12,corslite:1,polyline:2}],11:[function(a,b,c){(function(c){!function(){"use strict";function d(a){a.setSelectionRange?a.setSelectionRange(0,9999):a.select()}var e="undefined"!=typeof window?window.L:"undefined"!=typeof c?c.L:null;e.Routing=e.Routing||{},e.extend(e.Routing,a("./L.Routing.Autocomplete")),e.extend(e.Routing,a("./L.Routing.Waypoint")),e.Routing.Plan=e.Class.extend({includes:e.Mixin.Events,options:{dragStyles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2,dashArray:"7,12"}],draggableWaypoints:!0,routeWhileDragging:!1,addWaypoints:!0,addButtonClassName:"",maxGeocoderTolerance:200,autocompleteOptions:{},geocodersClassName:"",geocoderPlaceholder:function(a,b){return 0===a?"Start":b-1>a?"Via "+a:"End"},geocoderClass:function(){return""},createGeocoder:function(){var a=e.DomUtil.create("div","leaflet-routing-geocoder"),b=e.DomUtil.create("input","",a),c=e.DomUtil.create("span","leaflet-routing-remove-waypoint",a);return{container:a,input:b,closeButton:c}},createMarker:function(a,b,c){var d={draggable:this.draggableWaypoints},f=e.marker(b.latLng,d);return f},waypointNameFallback:function(a){var b=a.lat<0?"S":"N",c=a.lng<0?"W":"E",d=(Math.round(1e4*Math.abs(a.lat))/1e4).toString(),e=(Math.round(1e4*Math.abs(a.lng))/1e4).toString();return b+d+", "+c+e}},initialize:function(a,b){e.Util.setOptions(this,b),this._waypoints=[],this.setWaypoints(a)},isReady:function(){var a;for(a=0;a<this._waypoints.length;a++)if(!this._waypoints[a].latLng)return!1;return!0},getWaypoints:function(){var a,b=[];for(a=0;a<this._waypoints.length;a++)b.push(this._waypoints[a]);return b},setWaypoints:function(a){var b=[0,this._waypoints.length].concat(a);return this.spliceWaypoints.apply(this,b),this},spliceWaypoints:function(){var a,b=[arguments[0],arguments[1]];for(a=2;a<arguments.length;a++)b.push(arguments[a]&&arguments[a].hasOwnProperty("latLng")?arguments[a]:e.Routing.waypoint(arguments[a]));for([].splice.apply(this._waypoints,b),this._updateMarkers(),this._fireChanged.apply(this,b);this._waypoints.length<2;)this.spliceWaypoints(this._waypoints.length,0,null)},onAdd:function(a){this._map=a,this._updateMarkers()},onRemove:function(){var a;if(this._removeMarkers(),this._newWp)for(a=0;a<this._newWp.lines.length;a++)this._map.removeLayer(this._newWp.lines[a]);delete this._map},createGeocoders:function(){var a,b,c,d=e.DomUtil.create("div","leaflet-routing-geocoders "+this.options.geocodersClassName),f=this._waypoints;for(this._geocoderContainer=d,this._geocoderElems=[],a=0;a<f.length;a++)b=this._createGeocoder(a),d.appendChild(b.container),this._geocoderElems.push(b);return c=e.DomUtil.create("button",this.options.addButtonClassName,d),c.setAttribute("type","button"),c.innerHTML="+",this.options.addWaypoints?e.DomEvent.addListener(c,"click",function(){this.spliceWaypoints(f.length,0,null)},this):c.style.display="none",this.on("waypointsspliced",this._updateGeocoders),d},_createGeocoder:function(a){var b=this._waypoints.length,c=this.options.createGeocoder(a,b),f=c.closeButton,g=c.input,h=this._waypoints[a];return g.setAttribute("placeholder",this.options.geocoderPlaceholder(a,b)),g.className=this.options.geocoderClass(a,b),this._updateWaypointName(a,g),g.value=h.name,e.DomEvent.addListener(g,"click",function(){d(this)},g),f&&e.DomEvent.addListener(f,"click",function(){a>0||this._waypoints.length>2?this.spliceWaypoints(a,1):this.spliceWaypoints(a,1,new e.Routing.Waypoint)},this),new e.Routing.Autocomplete(g,function(b){g.value=b.name,h.name=b.name,h.latLng=b.center,this._updateMarkers(),this._fireChanged(),this._focusGeocoder(a+1)},this,e.extend({resultFn:this.options.geocoder.geocode,resultContext:this.options.geocoder,autocompleteFn:this.options.geocoder.suggest,autocompleteContext:this.options.geocoder},this.options.autocompleteOptions)),c},_updateGeocoders:function(a){var b,c,d,e=[],f=a.index>=this._geocoderElems.length;for(d=f?this._geocoderElems[this._geocoderElems.length].container.nextSibling:this._geocoderElems[a.index].container,b=0;b<a.added.length;b++)c=this._createGeocoder(a.index+b),this._geocoderContainer.insertBefore(c.container,d),e.push(c);for(b=a.index;b<a.index+a.nRemoved;b++)this._geocoderContainer.removeChild(this._geocoderElems[b].container);for(e.splice(0,0,a.index,a.nRemoved),[].splice.apply(this._geocoderElems,e),b=0;b<this._geocoderElems.length;b++)this._geocoderElems[b].input.placeholder=this.options.geocoderPlaceholder(b,this._waypoints.length),this._geocoderElems[b].input.className=this.options.geocoderClass(b,this._waypoints.length)},_updateGeocoder:function(a,b){var c=this._waypoints[a],d=c&&c.name?c.name:"";b&&(b.value=d)},_updateWaypointName:function(a,b,c){var d,e=this._waypoints[a];e.name=e.name||"",!e.latLng||!c&&e.name||(d=this.options.waypointNameFallback(e.latLng),this.options.geocoder&&this.options.geocoder.reverse?this.options.geocoder.reverse(e.latLng,67108864,function(c){c.length>0&&c[0].center.distanceTo(e.latLng)<this.options.maxGeocoderTolerance?(e.name=c[0].name,"undefined"!=typeof c[0].distance&&(e.distance=c[0].distance),"undefined"!=typeof c[0].properties&&(e.properties=c[0].properties)):e.name=d,this._updateGeocoder(a,b)},this):e.name=d,this._updateGeocoder(a,b))},_removeMarkers:function(){var a;if(this._markers)for(a=0;a<this._markers.length;a++)this._markers[a]&&this._map.removeLayer(this._markers[a]);this._markers=[]},_updateMarkers:function(){var a,b;if(this._map)for(this._removeMarkers(),a=0;a<this._waypoints.length;a++)this._waypoints[a].latLng?(b=this.options.createMarker(a,this._waypoints[a],this._waypoints.length),b&&(b.addTo(this._map),this.options.draggableWaypoints&&this._hookWaypointEvents(b,a))):b=null,this._markers.push(b)},_fireChanged:function(){this.fire("waypointschanged",{waypoints:this.getWaypoints()}),arguments.length>=2&&this.fire("waypointsspliced",{index:Array.prototype.shift.call(arguments),nRemoved:Array.prototype.shift.call(arguments),added:arguments})},_hookWaypointEvents:function(a,b,c){var d,f,g=function(a){return c?a.latlng:a.target.getLatLng()},h=e.bind(function(a){this.fire("waypointdragstart",{index:b,latlng:g(a)})},this),i=e.bind(function(a){this._waypoints[b].latLng=g(a),this.fire("waypointdrag",{index:b,latlng:g(a)})},this),j=e.bind(function(a){this._waypoints[b].latLng=g(a),this._waypoints[b].name="",this._updateWaypointName(b,this._geocoderElems&&this._geocoderElems[b].input,!0),this.fire("waypointdragend",{index:b,latlng:g(a)}),this._fireChanged()},this);c?(d=e.bind(function(a){this._markers[b].setLatLng(a.latlng),i(a)},this),f=e.bind(function(a){this._map.dragging.enable(),this._map.off("mouseup",f),this._map.off("mousemove",d),j(a)},this),this._map.dragging.disable(),this._map.on("mousemove",d),this._map.on("mouseup",f),h({latlng:this._waypoints[b].latLng})):(a.on("dragstart",h),a.on("drag",i),a.on("dragend",j))},dragNewWaypoint:function(a){var b=a.afterIndex+1;this.options.routeWhileDragging?(this.spliceWaypoints(b,0,a.latlng),this._hookWaypointEvents(this._markers[b],b,!0)):this._dragNewWaypoint(b,a.latlng)},_dragNewWaypoint:function(a,b){var c,d=new e.Routing.Waypoint(b),f=this._waypoints[a-1],g=this._waypoints[a],h=this.options.createMarker(a,d,this._waypoints.length+1),i=[],j=e.bind(function(a){var b;for(h&&h.setLatLng(a.latlng),b=0;b<i.length;b++)i[b].spliceLatLngs(1,1,a.latlng)},this),k=e.bind(function(b){var c;for(h&&this._map.removeLayer(h),c=0;c<i.length;c++)this._map.removeLayer(i[c]);this._map.off("mousemove",j),this._map.off("mouseup",k),this.spliceWaypoints(a,0,b.latlng)},this);for(h&&h.addTo(this._map),c=0;c<this.options.dragStyles.length;c++)i.push(e.polyline([f.latLng,b,g.latLng],this.options.dragStyles[c]).addTo(this._map));this._map.on("mousemove",j),this._map.on("mouseup",k)},_focusGeocoder:function(a){var b;this._geocoderElems[a]?(b=this._geocoderElems[a].input,b.focus(),d(b)):document.activeElement.blur()}}),e.Routing.plan=function(a,b){return new e.Routing.Plan(a,b)},b.exports=e.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Autocomplete":3,"./L.Routing.Waypoint":12}],12:[function(a,b,c){(function(a){!function(){"use strict";var c="undefined"!=typeof window?window.L:"undefined"!=typeof a?a.L:null;c.Routing=c.Routing||{},c.Routing.Waypoint=c.Class.extend({options:{allowUTurn:!1},initialize:function(a,b,d){c.Util.setOptions(this,d),this.latLng=a,this.name=b}}),c.Routing.waypoint=function(a,b,d){return new c.Routing.Waypoint(a,b,d)},b.exports=c.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[4])(4)}),function(a){var b;if("function"==typeof define&&define.amd)define(["leaflet"],a);else if("undefined"!=typeof module)b=require("leaflet"),module.exports=a(b);else{if("undefined"==typeof window.L)throw"Leaflet must be loaded first";a(window.L)}}(function(a){"use strict";return a.Control.Geocoder=a.Control.extend({options:{showResultIcons:!1,collapsed:!0,expand:"click",position:"topright",placeholder:"Search...",errorMessage:"Nothing found."},_callbackId:0,initialize:function(b){a.Util.setOptions(this,b),this.options.geocoder||(this.options.geocoder=new a.Control.Geocoder.Nominatim)},onAdd:function(b){var c,d="leaflet-control-geocoder",e=a.DomUtil.create("div",d),f=a.DomUtil.create("div","leaflet-control-geocoder-icon",e),g=this._form=a.DomUtil.create("form",d+"-form",e);return this._map=b,this._container=e,c=this._input=a.DomUtil.create("input"),c.type="text",c.placeholder=this.options.placeholder,a.DomEvent.addListener(c,"keydown",this._keydown,this),this._errorElement=document.createElement("div"),this._errorElement.className=d+"-form-no-error",this._errorElement.innerHTML=this.options.errorMessage,this._alts=a.DomUtil.create("ul",d+"-alternatives leaflet-control-geocoder-alternatives-minimized"),g.appendChild(c),g.appendChild(this._errorElement),e.appendChild(this._alts),a.DomEvent.addListener(g,"submit",this._geocode,this),this.options.collapsed?"click"===this.options.expand?a.DomEvent.addListener(f,"click",function(a){0===a.button&&1===a.detail&&this._toggle()},this):(a.DomEvent.addListener(f,"mouseover",this._expand,this),a.DomEvent.addListener(f,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):this._expand(),a.DomEvent.disableClickPropagation(e),e},_geocodeResult:function(b){if(a.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber"),1===b.length)this._geocodeResultSelected(b[0]);else if(b.length>0){this._alts.innerHTML="",this._results=b,a.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");for(var c=0;c<b.length;c++)this._alts.appendChild(this._createAlt(b[c],c))}else a.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")},markGeocode:function(b){return this._map.fitBounds(b.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new a.Marker(b.center).bindPopup(b.html||b.name).addTo(this._map).openPopup(),this},_geocode:function(b){return a.DomEvent.preventDefault(b),a.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber"),this._clearResults(),this.options.geocoder.geocode(this._input.value,this._geocodeResult,this),!1},_geocodeResultSelected:function(a){this.options.collapsed?this._collapse():this._clearResults(),this.markGeocode(a)},_toggle:function(){this._container.className.indexOf("leaflet-control-geocoder-expanded")>=0?this._collapse():this._expand()},_expand:function(){a.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select()},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-geocoder-expanded",""),a.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),a.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_clearResults:function(){a.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,a.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_createAlt:function(b,c){var d=document.createElement("li"),e=a.DomUtil.create("a","",d),f=this.options.showResultIcons&&b.icon?a.DomUtil.create("img","",e):null,g=b.html?void 0:document.createTextNode(b.name);return f&&(f.src=b.icon),e.href="#",e.setAttribute("data-result-index",c),b.html?e.innerHTML=b.html:e.appendChild(g),a.DomEvent.addListener(d,"click",function(c){a.DomEvent.preventDefault(c),this._geocodeResultSelected(b)},this),d},_keydown:function(b){var c=this,d=function(b){c._selection&&(a.DomUtil.removeClass(c._selection.firstChild,"leaflet-control-geocoder-selected"),c._selection=c._selection[b>0?"nextSibling":"previousSibling"]),c._selection||(c._selection=c._alts[b>0?"firstChild":"lastChild"]),c._selection&&a.DomUtil.addClass(c._selection.firstChild,"leaflet-control-geocoder-selected")};switch(b.keyCode){case 27:this._collapse();break;case 38:d(-1),a.DomEvent.preventDefault(b);break;case 40:d(1),a.DomEvent.preventDefault(b);break;case 13:if(this._selection){var e=parseInt(this._selection.firstChild.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[e]),this._clearResults(),a.DomEvent.preventDefault(b)}}return!0}}),a.Control.geocoder=function(b,c){return new a.Control.Geocoder(b,c)},a.Control.Geocoder.callbackId=0,a.Control.Geocoder.jsonp=function(b,c,d,e,f){var g="_l_geocoder_"+a.Control.Geocoder.callbackId++;c[f||"callback"]=g,window[g]=a.Util.bind(d,e);var h=document.createElement("script");h.type="text/javascript",h.src=b+a.Util.getParamString(c),h.id=g,document.getElementsByTagName("head")[0].appendChild(h)},a.Control.Geocoder.getJSON=function(b,c,d){var e=new XMLHttpRequest;e.open("GET",b+a.Util.getParamString(c),!0),e.send(null),e.onreadystatechange=function(){4==e.readyState&&(200==e.status||304==req.status)&&d(JSON.parse(e.response))}},a.Control.Geocoder.template=function(b,c,d){return b.replace(/\{ *([\w_]+) *\}/g,function(b,d){var e=c[d];return void 0===e?e="":"function"==typeof e&&(e=e(c)),a.Control.Geocoder.htmlEscape(e)})},a.Control.Geocoder.htmlEscape=function(){function a(a){return d[a]}var b=/[&<>"'`]/g,c=/[&<>"'`]/,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return function(d){return null==d?"":d?(d=""+d,c.test(d)?d.replace(b,a):d):d+""}}(),a.Control.Geocoder.Nominatim=a.Class.extend({options:{serviceUrl:"//nominatim.openstreetmap.org/",geocodingQueryParams:{},reverseQueryParams:{},htmlTemplate:function(b){var c=b.address,d=[];return(c.road||c.building)&&d.push("{building} {road} {house_number}"),(c.city||c.town||c.village)&&d.push('<span class="'+(d.length>0?"leaflet-control-geocoder-address-detail":"")+'">{postcode} {city}{town}{village}</span>'),(c.state||c.country)&&d.push('<span class="'+(d.length>0?"leaflet-control-geocoder-address-context":"")+'">{state} {country}</span>'),a.Control.Geocoder.template(d.join("<br/>"),c,!0)}},initialize:function(b){a.Util.setOptions(this,b)},geocode:function(b,c,d){a.Control.Geocoder.jsonp(this.options.serviceUrl+"search/",a.extend({q:b,limit:5,format:"json",addressdetails:1},this.options.geocodingQueryParams),function(b){for(var e=[],f=b.length-1;f>=0;f--){for(var g=b[f].boundingbox,h=0;4>h;h++)g[h]=parseFloat(g[h]);e[f]={icon:b[f].icon,name:b[f].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(b[f]):void 0,bbox:a.latLngBounds([g[0],g[2]],[g[1],g[3]]),center:a.latLng(b[f].lat,b[f].lon),properties:b[f]}}c.call(d,e)},this,"json_callback")},reverse:function(b,c,d,e){a.Control.Geocoder.jsonp(this.options.serviceUrl+"reverse/",a.extend({lat:b.lat,lon:b.lng,zoom:Math.round(Math.log(c/256)/Math.log(2)),addressdetails:1,format:"json"},this.options.reverseQueryParams),function(b){var c,f=[];b&&b.lat&&b.lon&&(c=a.latLng(b.lat,b.lon),f.push({name:b.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(b):void 0,center:c,bounds:a.latLngBounds(c,c),properties:b})),d.call(e,f)},this,"json_callback")}}),a.Control.Geocoder.nominatim=function(b){return new a.Control.Geocoder.Nominatim(b)},a.Control.Geocoder.Aws=a.Class.extend({reverse:function(b,c,d,e){a.Control.Geocoder.jsonp("//dawa.aws.dk/adgangsadresser/reverse/",{x:b.lng,y:b.lat},function(c){var f=[],g=a.latLng(c.adgangspunkt.koordinater[1],c.adgangspunkt.koordinater[0]);f[0]={name:c.vejstykke.navn+" "+c.husnr+", "+c.postnummer.nr+", "+c.postnummer.navn,html:" ",center:g,bounds:a.latLngBounds(g,g),properties:c,distance:g.distanceTo(b)},d.call(e,f)},this,"callback")}}),a.Control.Geocoder.aws=function(b){return new a.Control.Geocoder.Aws(b)},a.Control.Geocoder.Bing=a.Class.extend({initialize:function(a){this.key=a},geocode:function(b,c,d){a.Control.Geocoder.jsonp("//dev.virtualearth.net/REST/v1/Locations",{query:b,key:this.key},function(b){for(var e=[],f=b.resourceSets[0].resources.length-1;f>=0;f--){var g=b.resourceSets[0].resources[f],h=g.bbox;e[f]={name:g.name,bbox:a.latLngBounds([h[0],h[1]],[h[2],h[3]]),center:a.latLng(g.point.coordinates)}}c.call(d,e)},this,"jsonp")},reverse:function(b,c,d,e){a.Control.Geocoder.jsonp("//dev.virtualearth.net/REST/v1/Locations/"+b.lat+","+b.lng,{key:this.key},function(b){for(var c=[],f=b.resourceSets[0].resources.length-1;f>=0;f--){var g=b.resourceSets[0].resources[f],h=g.bbox;c[f]={name:g.name,bbox:a.latLngBounds([h[0],h[1]],[h[2],h[3]]),center:a.latLng(g.point.coordinates)}}d.call(e,c)},this,"jsonp")}}),a.Control.Geocoder.bing=function(b){return new a.Control.Geocoder.Bing(b)},a.Control.Geocoder.RaveGeo=a.Class.extend({options:{querySuffix:"",deepSearch:!0,wordBased:!1},jsonp:function(b,c,d){var e="_l_geocoder_"+a.Control.Geocoder.callbackId++,f=[];b.prepend=e+"(",b.append=")";for(var g in b)f.push(g+"="+escape(b[g]));window[e]=a.Util.bind(c,d);var h=document.createElement("script");h.type="text/javascript",h.src=this._serviceUrl+"?"+f.join("&"),h.id=e,document.getElementsByTagName("head")[0].appendChild(h)},initialize:function(b,c,d){a.Util.setOptions(this,d),this._serviceUrl=b,this._scheme=c},geocode:function(b,c,d){a.Control.Geocoder.jsonp(this._serviceUrl,{address:b+this.options.querySuffix,scheme:this._scheme,outputFormat:"jsonp",deepSearch:this.options.deepSearch,wordBased:this.options.wordBased},function(b){for(var e=[],f=b.length-1;f>=0;f--){var g=b[f],h=a.latLng(g.y,g.x);e[f]={name:g.address,bbox:a.latLngBounds([h]),center:h}}c.call(d,e)},this)}}),a.Control.Geocoder.raveGeo=function(b,c,d){return new a.Control.Geocoder.RaveGeo(b,c,d)},a.Control.Geocoder.MapQuest=a.Class.extend({initialize:function(a){this._key=decodeURIComponent(a)},_formatName:function(){var a,b=[];for(a=0;a<arguments.length;a++)arguments[a]&&b.push(arguments[a]);return b.join(", ")},geocode:function(b,c,d){a.Control.Geocoder.jsonp("//www.mapquestapi.com/geocoding/v1/address",{key:this._key,location:b,limit:5,outFormat:"json"},function(b){var e,f,g=[];if(b.results&&b.results[0].locations)for(var h=b.results[0].locations.length-1;h>=0;h--)e=b.results[0].locations[h],f=a.latLng(e.latLng),g[h]={name:this._formatName(e.street,e.adminArea4,e.adminArea3,e.adminArea1),bbox:a.latLngBounds(f,f),center:f};c.call(d,g)},this)},reverse:function(b,c,d,e){a.Control.Geocoder.jsonp("//www.mapquestapi.com/geocoding/v1/reverse",{key:this._key,location:b.lat+","+b.lng,outputFormat:"json"},function(b){var c,f,g=[];if(b.results&&b.results[0].locations)for(var h=b.results[0].locations.length-1;h>=0;h--)c=b.results[0].locations[h],f=a.latLng(c.latLng),g[h]={name:this._formatName(c.street,c.adminArea4,c.adminArea3,c.adminArea1),bbox:a.latLngBounds(f,f),center:f};d.call(e,g)},this)}}),a.Control.Geocoder.mapQuest=function(b){return new a.Control.Geocoder.MapQuest(b)},a.Control.Geocoder.Mapbox=a.Class.extend({options:{service_url:"https://api.tiles.mapbox.com/v4/geocode/mapbox.places-v1/"},initialize:function(a){this._access_token=a},geocode:function(b,c,d){a.Control.Geocoder.getJSON(this.options.service_url+encodeURIComponent(b)+".json",{access_token:this._access_token},function(b){var e,f,g,h=[];if(b.features&&b.features.length)for(var i=0;i<=b.features.length-1;i++)e=b.features[i],f=a.latLng(e.center.reverse()),g=e.hasOwnProperty("bbox")?a.latLngBounds(a.latLng(e.bbox.slice(0,2).reverse()),a.latLng(e.bbox.slice(2,4).reverse())):a.latLngBounds(f,f),h[i]={name:e.place_name,bbox:g,center:f};c.call(d,h)})},reverse:function(b,c,d,e){a.Control.Geocoder.getJSON(this.options.service_url+encodeURIComponent(b.lng)+","+encodeURIComponent(b.lat)+".json",{access_token:this._access_token},function(b){var c,f,g,h=[];if(b.features&&b.features.length)for(var i=0;i<=b.features.length-1;i++)c=b.features[i],f=a.latLng(c.center.reverse()),g=c.hasOwnProperty("bbox")?a.latLngBounds(a.latLng(c.bbox.slice(0,2).reverse()),a.latLng(c.bbox.slice(2,4).reverse())):a.latLngBounds(f,f),h[i]={name:c.place_name,bbox:g,center:f};d.call(e,h)})}}),a.Control.Geocoder.mapbox=function(b){return new a.Control.Geocoder.Mapbox(b)},a.Control.Geocoder.Google=a.Class.extend({options:{service_url:"https://maps.googleapis.com/maps/api/geocode/json"},initialize:function(a){this._key=a},geocode:function(b,c,d){var e={address:b};this._key&&this._key.length&&(e.key=this._key),a.Control.Geocoder.getJSON(this.options.service_url,e,function(b){var e,f,g,h=[];if(b.results&&b.results.length)for(var i=0;i<=b.results.length-1;i++)e=b.results[i],f=a.latLng(e.geometry.location),g=a.latLngBounds(a.latLng(e.geometry.viewport.northeast),a.latLng(e.geometry.viewport.southwest)),h[i]={name:e.formatted_address,bbox:g,center:f};c.call(d,h)})},reverse:function(b,c,d,e){var f={latlng:encodeURIComponent(b.lat)+","+encodeURIComponent(b.lng)};this._key&&this._key.length&&(f.key=this._key),a.Control.Geocoder.getJSON(this.options.service_url,f,function(b){var c,f,g,h=[];if(b.results&&b.results.length)for(var i=0;i<=b.results.length-1;i++)c=b.results[i],f=a.latLng(c.geometry.location),g=a.latLngBounds(a.latLng(c.geometry.viewport.northeast),a.latLng(c.geometry.viewport.southwest)),h[i]={name:c.formatted_address,bbox:g,center:f};d.call(e,h)})}}),a.Control.Geocoder.google=function(b){return new a.Control.Geocoder.Google(b)},a.Control.Geocoder}),function(){"use strict";var a=function(a){return a="number"==typeof a?{precision:a}:a||{},a.precision=a.precision||5,a.factor=a.factor||Math.pow(10,a.precision),a.dimension=a.dimension||2,a},b={encode:function(b,c){c=a(c);for(var d=[],e=0,f=b.length;f>e;++e){var g=b[e];if(2===c.dimension)d.push(g.lat||g[0]),d.push(g.lng||g[1]);else for(var h=0;h<c.dimension;++h)d.push(g[h])}return this.encodeDeltas(d,c)},decode:function(b,c){c=a(c);for(var d=this.decodeDeltas(b,c),e=[],f=0,g=d.length;f+(c.dimension-1)<g;){for(var h=[],i=0;i<c.dimension;++i)h.push(d[f++]);e.push(h)}return e},encodeDeltas:function(b,c){c=a(c);for(var d=[],e=0,f=b.length;f>e;)for(var g=0;g<c.dimension;++g,++e){var h=b[e],i=h-(d[g]||0);d[g]=h,b[e]=i}return this.encodeFloats(b,c)},decodeDeltas:function(b,c){c=a(c);for(var d=[],e=this.decodeFloats(b,c),f=0,g=e.length;g>f;)for(var h=0;h<c.dimension;++h,++f)e[f]=Math.round((d[h]=e[f]+(d[h]||0))*c.factor)/c.factor;return e},encodeFloats:function(b,c){c=a(c);for(var d=0,e=b.length;e>d;++d)b[d]=Math.round(b[d]*c.factor);return this.encodeSignedIntegers(b)},decodeFloats:function(b,c){c=a(c);for(var d=this.decodeSignedIntegers(b),e=0,f=d.length;f>e;++e)d[e]/=c.factor;return d},encodeSignedIntegers:function(a){for(var b=0,c=a.length;c>b;++b){var d=a[b];a[b]=0>d?~(d<<1):d<<1}return this.encodeUnsignedIntegers(a)},decodeSignedIntegers:function(a){for(var b=this.decodeUnsignedIntegers(a),c=0,d=b.length;d>c;++c){var e=b[c];b[c]=1&e?~(e>>1):e>>1}return b},encodeUnsignedIntegers:function(a){for(var b="",c=0,d=a.length;d>c;++c)b+=this.encodeUnsignedInteger(a[c]);return b},decodeUnsignedIntegers:function(a){for(var b=[],c=0,d=0,e=0,f=a.length;f>e;++e){var g=a.charCodeAt(e)-63;c|=(31&g)<<d,32>g?(b.push(c),c=0,d=0):d+=5}return b},encodeSignedInteger:function(a){return a=0>a?~(a<<1):a<<1,this.encodeUnsignedInteger(a)},encodeUnsignedInteger:function(a){for(var b,c="";a>=32;)b=(32|31&a)+63,c+=String.fromCharCode(b),a>>=5;return b=a+63,c+=String.fromCharCode(b)}};if("object"==typeof module&&"object"==typeof module.exports&&(module.exports=b),"object"==typeof L){L.Polyline.prototype.fromEncoded||(L.Polyline.fromEncoded=function(a,c){return new L.Polyline(b.decode(a),c)}),L.Polygon.prototype.fromEncoded||(L.Polygon.fromEncoded=function(a,c){return new L.Polygon(b.decode(a),c)});var c={encodePath:function(){return b.encode(this.getLatLngs())}};L.Polyline.prototype.encodePath||L.Polyline.include(c),L.Polygon.prototype.encodePath||L.Polygon.include(c),L.PolylineUtil=b}}();